<html>
<!--
  - CopyRight:  (C) dGB Earth Sciences
  - Author:     A.H. Lammertink / A.H. Bril
  - Date:       Nov 2003
  - Contents:   Windows specific stuff for programmers
  - RCS:        $Id: windows.html,v 1.35 2012-04-17 14:00:02 cvsbert Exp $ 
  -->

<body background="backg.png"><title>Windows development [OpendTect
Programmer's manual V4.2]</title>

<center>
<h1>OpendTect development on MS Windows</h1>
  <a href=#external>External installations</a>
| <a href=#setup>Setup</a>
| <a href=#buildod>Building OpendTect</a>
</center>

<br>
<img src="hr.png" border=0>

<a name=external><h2>External installations</h2></a>

<p> The external installations can, in principle, be installed wherever
you like. </p>


<h3>Visual Studio 10</h3>

<p>OpendTect 4.3 is built with Visual Studio 2010 (version 10), and it also supports Visual Studio 2010 express edition. The express edition can be downloaded from Microsoft's official web site <a href="http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-cpp-express"> here </a> </p>

<h3>CMake</h3>
CMake can be downloaded from <a href="http://www.cmake.org/cmake/resources/software.html"> here </a>.

<h3> Building Tutorial plugin </h3>
* Install developers package from the installation manager. 
<p> * start OpendTect and then from Utilities->tools->Create Devel Envionment launch the create work environment tool. This will prompt the user to specify a folder(WORK) to copy plugin building materials there, it could be any folder with names like "D:\WORK" or "D:\ODWORK" but "PLEASE DO NOT PUT IT IN THE INSTALLATION FOLDER". once done press OK. The WORK environment will be created with a success message. </p>

<p> * Now start cmake. and specify the full path of the newly created work(D:\WORK folder) environmnet both in the "source" and "output" options in the CMake window"
press configure </P>
<p> * If configure fails due to missing OpendTect-DIR, then specify OpendTect-DIR in cmake, which will be actually your OpendTect installation dir e.g C:\Program files\OpendTect\4.3.1. press configure again. </P>
* If everything succeeds press generate. 
CMake will generate the projects and solution file for your plugin. Now start Visual studio and load OpendTect_Tutorial_Plugin.sln which has just been created by CMake.


<h3> Debugging Tutorial plugin </h3>
Once you load the plugin solution in Visual Studio, you will notice the "od_main" project. This is the launcher project to launch od_main debug executable that came with the developers package. Right click on this project and set to "Set as stratup project", which means when you press F5 for debugging this project will be started. This will launch od_main.exe. At this pont Visual studio will show couple of warning messages because this is a dbug executable, please ignore all of them and continue. Once od_main is launched you will see the OpendTect Window. Now from the utlities ->plugin menu of OpendTect try to load your plugin by browsing to the WORK(D:\WORK)bin\win32 folder in your plugin directory and just set a break point to your code. So when the control comes to the break-point it will stop there and you can debug your code.  Please note you can only debug your own code and cannot step in to any OpendTect library functions, as this is being used as an external library.

<h3> Building your own plugin </h3>
The above example shows how to build the tutorail plugin. If you want to create your own plugin, we have a nice example called "My_Plugin_Name" which comes along with the Tutorial plugins. The idea is, you only have to replace the name of the plugin with the name of your plugin and let CMake do the rest for you.

<p> * Rename My_Plugin_Name folder with a name of your chice e.g "My_Inversion".  </P>

<p> * Do the same in ODWork\CMakeLists.txt. </p>

<p> * Rename my_plugin_name_pi.cc to a different name like "my_inv_plugin_pi.cc" as shown earlier. </p>

<p> * Edit my_inv_plugin_pi.cc and replace every occurences of "My_Plugin_Name" with your plugin name like "my_plugin_name" for example. </p>

<p> * Add your code  to my_inv_plugin_pi.cc file or if needed add some of your source files to ODWORK\my_inv_plugin and also make sure to add the entries to  ODWORK\my_inv_plugin\CMakeLists.txt. </p>


<p> * Proceed with CMake as before. </p>

<p> *If you manage to make the the projects and successfully built them, then start od_main project and load the plugin binaries form ODWork\bin\win32/64\debug in to OpendTect and enjoy the results of your work. </p>

<h3> Debugging your own plugin </h3>
The process is exactly similar as described above, 1)start Visual Stidio 2) build the plugin 3) start "od_main" project 4) load and debug your plugin.


<h3> Distributing your own plugins</h3>
Your plugin can be distributed with the new installation manager and OpendTect download site. You have to ship the plugin binaries and documentation to opendtect.org, where it will be available for download.



<h3> Building OpendTect ( not recommended unless really needed )</h3>
The OpendTect solution can also be built with CMake. In this case launch CMake and browse to your OpendTect installation folder, which becomes the development environment, and start configuring and generating from CMake. CMake will prompt for Qt anc Coin directory location, slect them from CMake itself and continue. Once the projects and solution are generated you can start building OpendTect.  

<h3>Qt</h3>
A Qt installation is only necessary when you want to build a plugin which is directly dependend on Qt. Download Windows Qt package from the <a href="http://qt.nokia.com/"> Qt website </a>. 


<h3>Coin and friends</h3>
<p>A full Coin installation is only necessary when you want to build a plugin which is directly dependend on Coin. Download Windows Coin, SoQt and SIMVoleon packages from <a href="http://coin3d.org/">Coin website </a>. Or get the source code from <a href="http://tortoisehg.bitbucket.org/">Mercurial</a> repositories and build yourself using Visual Studio. Check this <a href="http://www.coin3d.org/doc/mercurial_access/">link</a> for more details</p>
<br>


<br>
<img src="hr.png" border=0>

<p>
<center>
  <a href="index.html">Index</a1
| <a href="overview.html">Overview</a>
| <a href="plugins.html">Plugins</a>
| <a href="http://www.opendtect.org">opendtect.org</a>
</center>
</p>

</body>
</html>
