#!/bin/csh
#__Pmake________________________________________________________________________
#
# $Id: get_full_libnames,v 1.3 2005-11-18 09:47:45 cvsbert Exp $
# This script returns the full libname for a given link directive
#_______________________________________________________________________________

set libsubd=$1
shift

set archext=a
set dynext=so
set libprfx=lib
if( $HDIR == "win" ) then
    set archext=lib
    set dynext=dll
    set libprfx=""
endif

foreach inp ( $* )

    set lib=$inp
    if ( -e $lib ) then
	echo $lib
    else

	if ( `echo $inp|awk '{print substr($1,1,2)=="-l"?1:0;}'` == 1 ) then
	    set lib=`echo $inp|awk '{print substr($1,3,length($1))}'`
	    set lib=${libprfx}${lib}.${archext}
	else
	    set lib=$lib:t
	endif

	if ( ! -e $WORK/lib/$libsubd/$lib ) then
	    set lib=$lib:r
	    set lib=${libprfx}${lib}.${dynext}
	endif

	echo "$WORK/lib/$libsubd/$lib"

    endif

end

exit 0
