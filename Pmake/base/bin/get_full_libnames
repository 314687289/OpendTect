#!/bin/csh -f
#__Pmake________________________________________________________________________
#
# $Id: get_full_libnames,v 1.7 2008/11/03 08:59:20 cvsbert Exp $
# This script returns the full libname for a given link directive
#_______________________________________________________________________________

set libsubd=$1
shift

set archext=a
set dynext=so
set libprfx=lib
if( $HDIR == "win" ) then
    set archext=lib
    set dynext=dll
    set libprfx=""
else if ( $HDIR == "mac" ) then
    set dynext=dylib
endif

#set verbose=yes
#set echo=on

foreach inp ( $* )

    set libnm=$inp

    if ( -e $libnm || -d $libnm:h ) then

	echo $libnm

    else

	set isminl=`echo $libnm | awk '{ printf( "%s", substr($1,1,2) == "-l" ? "1" : "0" ); }'`

	if ( $isminl == 1 ) then

	set libnm=`echo $inp|awk '{ print substr($1,3,length($1)); }'`
	set libnm=${libprfx}${libnm}.${archext}
	if ( ! -e $WORK/lib/$libsubd/$libnm ) then
	    set libnm=$libnm:r
	    set libnm=${libnm}.${dynext}
	endif
	echo "$WORK/lib/$libsubd/$libnm"

    endif

end

exit 0
